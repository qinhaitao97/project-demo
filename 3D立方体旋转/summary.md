# summary

[TOC]

## 功能

![](https://ws1.sinaimg.cn/large/006eYMu7ly1ftagluoqzag30o00fmqt1.gif)

鼠标移入方块，方块向相反方向进行翻转，展示人物图片；鼠标移除方块，方块向相同方向进行翻转，展示文字图片

## 思路

每个物块的功能是相同的所以，这里只针对一个物块进行分析。在需求的功能中，只用到两个面，一个是文字图片展示面（正面），另一个是人物图片展示面（侧面）；文字图片在鼠标移入前、移除后都在正面展示，而人物图片则在侧面等待物块翻转时展示；通过鼠标移入移除的位置（js判断）可以判断物块要翻转的方向（人工分析），根据物块即将要翻转的方向，先将人物图片拼到侧面合适的位置（css操作），然后物块进行翻转（css操作），展示人物图片

## html结构

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    <div class="wrapper">
        <ul>
            <li>
                <div class="item">
                    <div class="front">
                        <img src="" alt="">
                    </div>
                    <div class="side">
                        <img src="" alt="">
                    </div>
                </div>
            </li>
            <li>...</li>
            <li>...</li>
            <li>...</li>
            <li>...</li>
            <li>...</li>
        </ul>
    </div>
</body>
</html>
```

这里需要格外注意的一点是 `<div class="item"><\div>` 这层结构的必要性，为什么一定要加这层结构呢，我们假设如果没有这层结构：每一个小方块都要进行单独的旋转，那么就需要包裹着 `.front` 和 `.side` 的父级整体进行旋转，即 `<li></li>` 进行旋转，而如果 `<li>` 的旋转想要看出3D效果，就要给 `<li>` 的父级设置一定的景深，级给 `<ul></ul>` 设置景深，到这里问题就显现出来了，因为如果给 `<ul></ul>` 设置景深，我们的视点就在ul的中央，这样，从ul的视点的角度去观察这6个li，是从不同角度看到的，会因为视角的不通过造成视觉上的差异，所以我们需要给每一个旋转的方块单独提供一个视点，也就是说，要给每一个旋转的元素的父级单独设置景深，所以这里给 `.front` 和 `.side` 单独包裹一层父级 `<div class="item"></div` 让这层父级进行旋转，然后在li上设置景深，这样每一个小方块都有自己单独的视点，3D效果均相同

## bug

1. 当方块进行翻转的时候，因为我们设置翻转的时间稍微有一点长，所以在文字图片翻到侧面之前鼠标有可能再次移入了文字图片区域，使得判断会再次执行，解决这个bug的方法一种是将翻转动画的时间降低，但是这样有可能影响动画的效果（美观性）；另一种是在方块翻转结束前，给判断事件上锁，不在进行翻转方向的判断，直至一次翻转结束后

2. 用鼠标吧页面中所有的元素选中时，为什么会有奇怪的文本区域

   ![](https://ws1.sinaimg.cn/large/006eYMu7ly1ftalmdfx9og30ne0g7jse.gif)